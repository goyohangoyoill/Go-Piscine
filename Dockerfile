###############################################################################
#                                                       Image Info on builder
###############################################################################
FROM		golang:1.17-alpine as builder

###############################################################################
#                                                       Task Info on builder
###############################################################################
WORKDIR		/build
COPY		../srcs srcs/

WORKDIR		/build/srcs
RUN			go mod tidy && go build -o piscine-golang-interact

###############################################################################
#                                                       Image Info on publish
###############################################################################
FROM		alpine

###############################################################################
#                                                       Copy Files on publish
###############################################################################
WORKDIR		/run
COPY		--from=builder /build/srcs/piscine-golang-interact ./pisicne-golang-interact

###############################################################################
#                                                       Open Ports on publish
###############################################################################
EXPOSE		80		443

###############################################################################
#                                                       Starting on publish
###############################################################################
ENTRYPOINT	["/bin/sh"]
